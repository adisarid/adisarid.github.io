<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="A few days ago I presented at the 9th Israeli class action lawsuit conference. You’re probably asking yourself what would a data scientist do in a room full of lawyers?" />

  
  <link rel="alternate" hreflang="en-us" href="https://adisarid.github.io/post/2019-02-03-class-action-conjoint/" />

  









  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.f0cf03b20998d63e314819fa4a90c13f.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-K7YT1P1DEV"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-K7YT1P1DEV', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu3addb1d2efd6524d7c75d3b1174538d9_629_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu3addb1d2efd6524d7c75d3b1174538d9_629_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://adisarid.github.io/post/2019-02-03-class-action-conjoint/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="Adi Sarid" />
  <meta property="og:url" content="https://adisarid.github.io/post/2019-02-03-class-action-conjoint/" />
  <meta property="og:title" content="Settling class action lawsuits with conjoint analysis and R (&#43;a conjoint shiny app) | Adi Sarid" />
  <meta property="og:description" content="A few days ago I presented at the 9th Israeli class action lawsuit conference. You’re probably asking yourself what would a data scientist do in a room full of lawyers?" /><meta property="og:image" content="https://adisarid.github.io/media/icon_hu3addb1d2efd6524d7c75d3b1174538d9_629_512x512_fill_lanczos_center_3.png" />
    <meta property="twitter:image" content="https://adisarid.github.io/media/icon_hu3addb1d2efd6524d7c75d3b1174538d9_629_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2019-02-03T12:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2019-02-03T12:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://adisarid.github.io/post/2019-02-03-class-action-conjoint/"
  },
  "headline": "Settling class action lawsuits with conjoint analysis and R (+a conjoint shiny app)",
  
  "datePublished": "2019-02-03T12:00:00Z",
  "dateModified": "2019-02-03T12:00:00Z",
  
  "publisher": {
    "@type": "Organization",
    "name": "Adi Sarid",
    "logo": {
      "@type": "ImageObject",
      "url": "https://adisarid.github.io/media/icon_hu3addb1d2efd6524d7c75d3b1174538d9_629_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "A few days ago I presented at the 9th Israeli class action lawsuit conference. You’re probably asking yourself what would a data scientist do in a room full of lawyers?"
}
</script>

  

  

  

  





  <title>Settling class action lawsuits with conjoint analysis and R (&#43;a conjoint shiny app) | Adi Sarid</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="afd35131d0c5babf2c2f856fccadaf41" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.8988fb2a4bba758785868cfcb5244555.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Adi Sarid</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Adi Sarid</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#intro"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#talks"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Settling class action lawsuits with conjoint analysis and R (&#43;a conjoint shiny app)</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Feb 3, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>A few days ago I presented at the 9th Israeli class action lawsuit conference. You’re probably asking yourself what would a data scientist do in a room full of lawyers?</p>
<p>Apparently, there is a lot to do… Here’s the story: being in market research, we get a lot of lawyers which are faced with class action lawsuits (either suing or being sued) - and they hire us to conduct research and estimate things like the size of the group for the class action, or the total damages applied on the group.</p>
<p>This time, we did something special. we conducted our own survey, with consumers in the general public in Israel. The goal was to rate various ways of getting compensation (after settling a class action lawsuit).</p>
<p>For that we used conjoint analysis. Conjoint is where you ask the survey participants a set of questions (five in our case). Each question has a number of alternatives (or packages) to choose from, and these are randomized per respondent. In our case we showed three packages, each package is defined by three parameters relating to how a consumer can get compensation in case of a class action being won:</p>
<ol style="list-style-type: decimal">
<li>Push versus pull - do you have to ask for the compensation or would you get the notification/compensation without asking.</li>
<li>The value of the compensation - tested at 4 levels (25, 50, 75, and 100 ILS)</li>
<li>The method of delivery - as a complimentary product, a refund at next purchase, bank cheque, or credit card.</li>
</ol>
<p>The thing about conjoint analysis is that when you diversify enough, you can then run various models to estimate the weight of each parameter, i.e., using logistic regression.</p>
<p>The data is available in the <a href="https://github.com/adisarid/class-action-IL-survey">github repo</a>, and the specific data is under the data folder.</p>
<pre class="r"><code>#library(tidyverse)
class_action_conjoint &lt;- read_csv(&quot;https://raw.githubusercontent.com/adisarid/class-action-IL-survey/master/data/20190130020529-SurveyExport-general_public-conjoint.csv&quot;,
                                  skip = 1,
                                  col_names = 
                                    c(&quot;Response ID&quot;, &quot;Set Number&quot;, &quot;Card Number&quot;, 
                                      &quot;compensation_push_pull&quot;, &quot;compensation_amount_ILS&quot;, &quot;compensation_type&quot;,
                                      &quot;score_selection&quot;))</code></pre>
<pre><code>## Rows: 7020 Columns: 7── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (2): compensation_push_pull, compensation_type
## dbl (5): Response ID, Set Number, Card Number, compensation_amount_ILS, scor...
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>glimpse(class_action_conjoint)</code></pre>
<pre><code>## Rows: 7,020
## Columns: 7
## $ `Response ID`           &lt;dbl&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10…
## $ `Set Number`            &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 1…
## $ `Card Number`           &lt;dbl&gt; 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1…
## $ compensation_push_pull  &lt;chr&gt; &quot;push&quot;, &quot;push&quot;, &quot;push&quot;, &quot;push&quot;, &quot;pull&quot;, &quot;pull&quot;…
## $ compensation_amount_ILS &lt;dbl&gt; 75, 50, 25, 100, 25, 100, 75, 100, 50, 25, 75,…
## $ compensation_type       &lt;chr&gt; &quot;another_product&quot;, &quot;credit_cart&quot;, &quot;bank_cheque…
## $ score_selection         &lt;dbl&gt; 0, 0, 100, 0, 100, 0, 0, 0, 100, 0, 100, 0, 10…</code></pre>
<pre class="r"><code>class_action_conjoint %&gt;% count(compensation_push_pull)</code></pre>
<pre><code>## # A tibble: 2 × 2
##   compensation_push_pull     n
##   &lt;chr&gt;                  &lt;int&gt;
## 1 pull                    3516
## 2 push                    3504</code></pre>
<pre class="r"><code>class_action_conjoint %&gt;% count(compensation_amount_ILS)</code></pre>
<pre><code>## # A tibble: 4 × 2
##   compensation_amount_ILS     n
##                     &lt;dbl&gt; &lt;int&gt;
## 1                      25  1759
## 2                      50  1761
## 3                      75  1752
## 4                     100  1748</code></pre>
<pre class="r"><code>class_action_conjoint %&gt;% count(compensation_type)</code></pre>
<pre><code>## # A tibble: 5 × 2
##   compensation_type        n
##   &lt;chr&gt;                &lt;int&gt;
## 1 another_product       1391
## 2 bank_cheque           1410
## 3 coupon                1403
## 4 credit_cart           1415
## 5 refund_next_purchase  1401</code></pre>
<p>You can see that the different options are balanced (they should be - they were selected randomly) and that the number of observations is <span class="math inline">\(7,020\)</span>. This is because we had <span class="math inline">\(n=468\)</span> respondents answering the conjoint question groups, each selecting best one out of three, with five such random sets (<span class="math inline">\(5*3*468=7020\)</span>).</p>
<div id="logistic-regression" class="section level2">
<h2>Logistic regression</h2>
<p>The easiest (and most basic) way to start analyzing the conjoint data is with logistic regression. Note that I’m not endorsing this use of logistic regression in conjoint analysis, because nowadays it has become a standard to compensate for mixed effects (see package <code>lme4</code>). However, for the purposes of this post, I’m going to carry on with the simple <code>glm</code> which is sufficiently good for our illustration. In any case, my experience is that the models yield similar results in most cases.</p>
<pre class="r"><code>glm_set &lt;- class_action_conjoint %&gt;% 
  mutate(score_selection = score_selection/100) %&gt;% 
  mutate(compensation_push_pull = factor(compensation_push_pull,
                                         levels = c(&quot;pull&quot;, &quot;push&quot;),
                                         ordered = F),
         compensation_type = factor(compensation_type,
                                    levels = 
                                      c(&quot;another_product&quot;,
                                        &quot;refund_next_purchase&quot;,
                                        &quot;coupon&quot;,
                                        &quot;bank_cheque&quot;,
                                        &quot;credit_cart&quot;),
                                    ordered = F)) %&gt;% 
  select(-`Set Number`, -`Card Number`, -`Response ID`) %&gt;% 
  mutate(compensation_amount_ILS = factor(compensation_amount_ILS, levels = c(25, 50, 75, 100)))

conjoint_glm_model &lt;- glm(data = glm_set %&gt;% 
      select(score_selection, compensation_push_pull, compensation_amount_ILS, compensation_type),
    formula = score_selection ~ .,
    family = binomial())
summary(conjoint_glm_model)</code></pre>
<pre><code>## 
## Call:
## glm(formula = score_selection ~ ., family = binomial(), data = glm_set %&gt;% 
##     select(score_selection, compensation_push_pull, compensation_amount_ILS, 
##         compensation_type))
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.8635  -0.8111  -0.5139   0.8796   2.6557  
## 
## Coefficients:
##                                       Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                           -3.49667    0.11341 -30.832   &lt;2e-16 ***
## compensation_push_pullpush             0.74140    0.05807  12.767   &lt;2e-16 ***
## compensation_amount_ILS50              1.01476    0.09385  10.813   &lt;2e-16 ***
## compensation_amount_ILS75              1.73623    0.09224  18.823   &lt;2e-16 ***
## compensation_amount_ILS100             2.40149    0.09281  25.876   &lt;2e-16 ***
## compensation_typerefund_next_purchase  0.08431    0.10399   0.811    0.418    
## compensation_typecoupon                1.10396    0.09588  11.514   &lt;2e-16 ***
## compensation_typebank_cheque           1.53888    0.09473  16.245   &lt;2e-16 ***
## compensation_typecredit_cart           1.89640    0.09586  19.782   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 8936.7  on 7019  degrees of freedom
## Residual deviance: 7295.6  on 7011  degrees of freedom
## AIC: 7313.6
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Note how most variables (actually all but <code>compensation_typerefund_next_purchase</code>) are significant and with a positive estimate (i.e., odds ratio &gt; 1). This means means that when a certain variable increases, the probability of choosing the package increases, i.e.:</p>
<ul>
<li>Passively getting the compensation (“Push”) is better than a required act to get the compensation (“pull”) .</li>
<li>Any sum of money (50, 75, 100) is better than 25, in an increasing odds ratio.</li>
<li>Most compensation types (credit card payback, bank cheque, coupon) are significantly better than a complimentary product.</li>
</ul>
<p>Now comes the interesting part: for example, compare the following three packages. Try to guess which one is more attractive:</p>
<table>
<thead>
<tr class="header">
<th align="left">Parameter</th>
<th align="center">Package 1</th>
<th align="center">Package 2</th>
<th align="center">Package 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Push/Pull</td>
<td align="center">Pull</td>
<td align="center">Pull</td>
<td align="center">Push</td>
</tr>
<tr class="even">
<td align="left">Return</td>
<td align="center">Credit</td>
<td align="center">Refund</td>
<td align="center">Coupon</td>
</tr>
<tr class="odd">
<td align="left">Price</td>
<td align="center">25</td>
<td align="center">75</td>
<td align="center">25</td>
</tr>
</tbody>
</table>
<p>It is not that easy to determine between the three. In this situation there is no single strategy which is superior to the others, we can however plot these three packages with the logistic regression response and standard errors. First let’s put them all in a tibble (I also added the best and worst packages).</p>
<pre class="r"><code>package_comparison &lt;- tribble(
  ~package_name, ~compensation_push_pull, ~compensation_amount_ILS, ~compensation_type,
  &quot;pkg1&quot;, &quot;pull&quot;, 25, &quot;credit_cart&quot;,
  &quot;pkg2&quot;, &quot;pull&quot;, 75, &quot;refund_next_purchase&quot;,
  &quot;pkg3&quot;, &quot;push&quot;, 25, &quot;coupon&quot;,
  &quot;worst&quot;, &quot;pull&quot;, 25, &quot;another_product&quot;,
  &quot;best&quot;, &quot;push&quot;, 100, &quot;credit_cart&quot;
) %&gt;% 
  mutate(compensation_amount_ILS = factor(compensation_amount_ILS)) # need to convert to factor - which is how it is modeled in the glm.

predicted_responses &lt;- predict(conjoint_glm_model, newdata = package_comparison, type = &quot;response&quot;, se.fit = T)

# lets join these together

package_responses &lt;- package_comparison %&gt;% 
  mutate(fit = predicted_responses$fit,
         se.fit = predicted_responses$se.fit)

package_responses</code></pre>
<pre><code>## # A tibble: 5 × 6
##   package_name compensation_push_pull compensation_amou…¹ compe…²    fit  se.fit
##   &lt;chr&gt;        &lt;chr&gt;                  &lt;fct&gt;               &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
## 1 pkg1         pull                   25                  credit… 0.168  0.0129 
## 2 pkg2         pull                   75                  refund… 0.158  0.0122 
## 3 pkg3         push                   25                  coupon  0.161  0.0129 
## 4 worst        pull                   25                  anothe… 0.0294 0.00324
## 5 best         push                   100                 credit… 0.824  0.0123 
## # … with abbreviated variable names ¹​compensation_amount_ILS,
## #   ²​compensation_type</code></pre>
<pre class="r"><code># P.S. - excuse the &quot;credit_cart&quot; typo (I build the model that way, only then noticed...)

ggplot(package_responses %&gt;% slice(1:3) , aes(x = package_name, y = fit)) + 
  geom_point() +
  geom_errorbar(aes(ymin = fit - se.fit, ymax = fit + se.fit)) + 
  ggtitle(&quot;Package comparison (packages 1-3)&quot;, subtitle = &quot;Error bars represent the SE&quot;) + 
  ylab(&quot;Predicted response (glm logit)&quot;) + 
  xlab(&quot;Package name&quot;) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1))</code></pre>
<p><img src="/post/2019-02-03-class-action-conjoint_files/figure-html/compute%20error%20with%20chart-1.png" width="672" /></p>
<pre class="r"><code>ggplot(package_responses, aes(x = package_name, y = fit)) + 
  geom_point() +
  geom_errorbar(aes(ymin = fit - se.fit, ymax = fit + se.fit)) + 
  ggtitle(&quot;Package comparison (including best and worst packages)&quot;, subtitle = &quot;Error bars represent the SE&quot;) + 
  ylab(&quot;Predicted response (glm logit)&quot;) +
  xlab(&quot;Package name&quot;) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1))</code></pre>
<p><img src="/post/2019-02-03-class-action-conjoint_files/figure-html/compute%20error%20with%20chart-2.png" width="672" /></p>
<p>We see that the three packages (pkg1, pkg2, and pkg3) are relatively similar, within one standard error from one another. When compared to the worst package they are roughly <span class="math inline">\(\sim8\)</span> times better (via odds ratio), but the best package is <span class="math inline">\(\sim5\)</span> times better than packages 1-3.</p>
<p>One can use these concepts to illustrate the benefits of each parameter on the different packages, and let the user experience how different features make the packages more or less “attractive”.</p>
<p>As an experiment, I prepared a nice little shiny app which lets the user experiment with the different features: build two packages and then compare them. You can checkout the code at the <a href="https://github.com/adisarid/class-action-IL-survey/tree/master/settlement-app/SettlementAttractive">github repo</a>, or check out the live app <a href="https://sarid.shinyapps.io/class-action">here</a>.</p>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>Surveys are a popular tool used in class actions (at least in Israel). They can be used to estimate the tradeoffs between various types of compensation or settlement, for example with the use of conjoint analysis.</p>
<p>With a glm model one can tell the differences of various packages, and the odds ratio is a way to illustrate to decision makers a comparison of various options (and how much “more attractive” is one package over another).</p>
<p>A shiny app can be a nice way to illustrate the results of a conjoint analysis, and to let the user experiment with how different features make a specific option better or worse than another option.</p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/conjoint-analysis/">Conjoint analysis</a>
  
  <a class="badge badge-light" href="/tag/class-actions/">Class actions</a>
  
  <a class="badge badge-light" href="/tag/shiny/">shiny</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://adisarid.github.io/post/2019-02-03-class-action-conjoint/&amp;text=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://adisarid.github.io/post/2019-02-03-class-action-conjoint/&amp;t=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29&amp;body=https://adisarid.github.io/post/2019-02-03-class-action-conjoint/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://adisarid.github.io/post/2019-02-03-class-action-conjoint/&amp;title=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29%20https://adisarid.github.io/post/2019-02-03-class-action-conjoint/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://adisarid.github.io/post/2019-02-03-class-action-conjoint/&amp;title=Settling%20class%20action%20lawsuits%20with%20conjoint%20analysis%20and%20R%20%28&#43;a%20conjoint%20shiny%20app%29" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://adisarid.github.io"></a></h5>
      <h6 class="card-subtitle"><img class = "avatar avatar-circle" src="/home/adi_sarid_hex_headshot.jpg" width="100" height="100" style="zoom:80%; text-align:left;"><br/>Partner and Head of Data Science</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/SaridResearch" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.co.uk/citations?user=Lza4mMoAAAAJ" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/adisarid" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>
















  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/using-github-actions-to-update-a-shiny-app/">Using Github Actions to update a shiny app on a private server</a></li>
      
      <li><a href="/post/2019-12-13-confidence_prediction_intervals_explained/">Confidence and prediction intervals explained... (with a Shiny app!)</a></li>
      
      <li><a href="/post/2019-08-10-cognito-shiny-authentication/">Securing Shiny apps with AWS Cognito authentication</a></li>
      
      <li><a href="/post/2019-07-03-shiny_app_lessons/">What NOT to do when building a shiny app (lessons learned the hard way)</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  

  
  <p class="powered-by">
    © 2023 Adi Sarid
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.8859d3cf6e5d748215fea2814e2e9c7f.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
